## vim入坑指南

如果你想迅速学习vim的操作，就直接跳转到笔记部分吧，还想缓一缓的话，那就继续听我的一段无聊废话！

### 无聊的废话

首先你需要充分的了解，vim到底是做什么的，简单来说，它就是一个文本编辑器，哎，就是你以为的记事本，但是它的功能远比你想象的还要多（我相信没人会用记事本来记笔记，写博客，写代码）

没错，世界上只有1/0种人，那对于一般人来说，vim到底有啥用呢？

嗯……，举个简单的例子吧，当一篇糟糕的word文档需要你快速修改时，或者你只想要在游戏里火力全开而又不想浪费宝贵的肺活量时，再或者时你心血来潮想码一篇博客时，在这时候，vim横空出世，会给你带来不一样的体验。

当然了，vim对于程序员来说，简直就是宇宙神器，貌似除了生孩子以外，其他事它都能做了（此处不再详细论述，vim还不会的话，那就赶快学它呀）

了解完vim是什么东东之后，有人可能会问这东西咋用，在哪用？

不要着急，学会一个东西，尤其是新的东西，刚入门的时候是很难受的，但适应的之后就会很快乐了。

---

先说说它在哪里用吧，这里推荐一个类似于搜狗输入法的软件，可以保证你在任何编辑器里用vim来编辑。

链接如下：

[vim](https://github.com/einsxiao/GlobalVim)

在windows先得下载一个gvim来先练练手vim的使用方法，或者可以在[web)[[Webminal](https://www.webminal.org/terminal/)]去练习。就像上战场之前，士兵要先在训练基地实战演练一波。

声明一点，gvim只是一个文本编辑器

[gvim](https://link.zhihu.com/?target=https%3A//github.com/vim/vim-win32-installer/releases/download/v8.2.0227/gvim_8.2.0227_x64_signed.exe)

备注：为了适应Windows系统，在使用globalvim时有的功能可能会无法实现，但下载gvim可以使用，

### 新手引导

1. 打开gvim，然后不要碰鼠标！不要碰鼠标！不要碰鼠标！重要的事情说三遍
2. 按<kbd>Shift</kbd>+<kbd>:</kbd>之后，输入"shell"。说明：此时进入命令解析器界面
3. 输入`vimtutor`，此时进入gvim自带的官方教程，可以进行学习。

-----

### vim几种模式

#### 正常模式（normal）

可以使用快捷键命令，或者按<kbd>:</kbd>输入命令行

#### 插入模式（insert）

可以输入文本，在正常情况下，按<kbd>i</kbd>,<kbd>a</kbd>,<kbd>o</kbd>都可以进入插入模式

#### 可视模式（visual）

正常情况下，按<kbd>v</kbd>进入可视模式。

在可视模式下，移动光标可以选择文本；总是整行整行的选中；<kbd>Ctrl</kbd>+<kbd>v</kbd>进入可视化模式

#### 替换模式（replace）

正常情况下，按<kbd>r</kbd>

#### 命令行（command-line）

## 基本操作

### 光标移动

| 方位  | 按键           |
|:---:|:------------:|
| 上   | <kbd>K</kbd> |
| 下   | <kbd>J</kbd> |
| 左   | <kbd>H</kbd> |
| 右   | <kbd>L</kbd> |

提示：记住<kbd>J</kbd>是向下就习惯了

### 相关按键功能

| 键位  | 单词      | 含义      |
|:---:|:-------:|:-------:|
| d   | delete  | 剪切      |
| $   |         | 移动到本行末  |
| 0   |         | 移动到本行首  |
| y   | yank    | 猛地一拉，复制 |
| p   | paste   | 粘贴      |
| r   | replace | 替换文本    |
| w   | word    | 下一个单词开头 |
| e   |         | 下一个单词结尾 |
| b   | back    | 前一个单词开头 |
| i   | insert  | 插入      |
| f   | find    | 行位      |

### 文本编辑之删除

normal模式下，
按<kbd>x</kbd>会删除单个字符
输入 "dw" 会删除一个单词
输入 "d$" 会删除至行末
关于命令与对象

>  命令由一个操作符和一个动作构成
> 
> ```shell
> d  [number]   motion
> ```
> 
>  d              -操作符
>  number    -操作重复次数  
>  motion     -操作符的操作对象

### 文本编辑之插入

按<kbd>i</kbd>输入内容
注：插入是指在文本之前编辑内容，在globalvim中，为适应Windows操作系统，在普通模式下，按a，i，A的效果一样，都是在文本之后编辑

### 文本编辑之添加

按<kbd>a</kbd>或者<kbd>A</kbd>添加内容
注：添加即在文本之后编辑，a在文本之后编辑，A在本行末编辑

### 附加类命令

正常模式下按<kbd>e</kbd>可跳转至文本末尾

### 编辑文件

正常模式下
输入<kbd>wq</kbd>                                                     -即可保存改动并关闭文件
输入<kbd>:!q</kbd>                                                   -即可不保存改动并关闭文件

### 打开类命令

正常模式下按<kbd>o</kbd>可在文本下方打开新的一行并进入插入模式
按<kbd>O</kbd>在文本上方打开新的一行并进入插入模式

### 替换类命令

正常模式下
输入<kbd>R</kbd>                                                                           -可连续替换多个文本
输入<kbd>:</kbd><kbd>s</kbd><kbd>/</kbd><kbd>thee</kbd><kbd>/</kbd><kbd>the</kbd>   <kbd>回车</kbd>                            -只替换光标所在行的匹配的一个thee为the
输入<kbd>:</kbd><kbd>s</kbd><kbd>/</kbd><kbd>thee</kbd><kbd>/</kbd><kbd>the</kbd><kbd>/</kbd><kbd>g</kbd>   <kbd>回车</kbd>                  -替换光标所在行的匹配的所有thee为the

### 在vim内执行外部命令

输入<kbd>:</kbd><kbd>!</kbd>然后接着输入一个命令，可以执行该外部命令

> 输入<kbd>:</kbd><kbd>!</kbd><kbd>dir</kbd>，然后回车                            -可以查看当前目录的内容
> 输入<kbd>:</kbd><kbd>w</kbd>         <kbd>TEST</kbd>                                   -即可保存该文件
> 输入<kbd>:</kbd><kbd>!</kbd><kbd>del</kbd>        <kbd>TEST</kbd>                           -即可删除TEST文件

### 复制粘贴文本

首先按<kbd>v</kbd>进入可视模式,输入<kbd>y</kbd>复制高亮的文本,然后输入<kbd>p</kbd>来粘贴

### 匹配括号

光标在一处<kbd>(</kbd>处,输入<kbd>%</kbd>                                          -则可跳转匹配到其对称的<kbd>)</kbd>

### 定位光标

按下<kbd>Ctrl</kbd>+<kbd>g</kbd>                                                          -即可在页面底部查看文件名和光标所在行信息
输入<kbd> 一个随便的数字</kbd>然后按<kbd>shift</kbd>+<kbd>g</kbd>                  -即可跳转至指定数字行
输入<kbd>G</kbd>                                                                       -即可跳转至文档末行
输入<kbd>gg</kbd>                                                                     -即可跳转至文档首行 

---

## 实用

此处为各个开发平台的使用操作

### 移动

h/左  j/下  k/上  l/右

### 复制&粘贴

y复制  p粘贴

yy复制当前行
p粘贴

### 语法规则

vim只有一个语法规则

```v
verb + noun    //动词 + 名词
```

----

### 名词（动作 Motion）

```v
h            左
j            下
k            上
l            右
w            向前跳转到下一个单词的开头    word
}            跳转到下一个段落
$            跳转到当前行的末尾
```

### 动词（操作符 Operator）

```v
y            yank（复制）
d            delete（删除）
c            change（删除文本，将删除的文本保存到寄存器，并进入插入模式
```

----

### 动词 （操作符 Operator）+  名词（动作 Motions）组合

```v
const learning = "vim";
```

- 复制当前位置到行尾的所有内容：y$
- 删除当前位置到下一个单词的开头：dw
- 修改当前位置到这个段落的结尾：c}

接受数字参数

- 向左拷贝2个字符： y2h

- 删除后2个单词：d2w

- 修改后2行：c2j
  
  目前，你也许需要想很久才能完成一个简单的命令，不过我刚开始时也是这样，我也经历过类似的挣扎的阶段但是不久我的速度就快了起来，你也一样。唯一途径就是重复、重复再重复。

行级操作符

- 删除整行：dd

- 复制整行：yy

- 修改整行：cc

----

### 文本对象（Test object）

文本通常是结构化的，特别是代码中，文本经常被放置在小括号、中括号、大括号、引号等当中。Vim提供了一种处理这种结构的文本对象的方法。

这里有两类文本对象

```v
i + object            内部文本对象
a + object            外部文本对象
```

**内部文本对象**选中的部分不包含包围文本对象的空白或括号等，**外部文本对象**则包括了包围内容的空白或括号等对象。外部对象总是比内部对象选中的内容更多。

```java
const hello = function() {
    console.log("Hello Vim");
    return true;
}
```

当光标停留在"H"时，

- 删除整个"Hello Vim"：di(
- 删除函数体：di{
- 删除“Hello"这个词：diw

常见文本对象：

```
w     一个单词
p     一个段落
s     一个句子
(或)  一对()
{或}  一对{}
[或]  一对[]
<或>  一对<>
t     XML标签
"     一对""
'     一对''
`     一对``
```

---

### 单词导航

为了和上面说的单词(word)做个区分，还有一种移动的单元：词组(WORD)。 你可以通过W移动到下一个词组的开始，通过E移动到下一个词组的结尾，通过B移动到前一个词组的开头，通过gE移动到前一个词组的结尾。 为了方便记忆，所以我们选择了词组和单词这两个词，相似但有些区分。

```
W                移动到下一个词组的开头
B                移动到上一个词组的开头
E                移动到下一个词组的结尾
gE                移动到上一个词组的结尾
```

词组和单词到底有什么相同和不同呢？

单词和词组都按照非空字符被分割，一个单词指的是一个只包含`a-zA-Z0-9`字符串，一个词组指的是一个包含除了空字符(包括空格，tab，EOL)以外的字符的字符串。

```
contsant hello = "vim";
```

当光标位于行首时，可以一直按<kbd>l</kbd>到行尾，也可以按<kbd>w</kbd>6次，也可以按<kbd>W</kbd>4次即可

### 当前行导航

```
0                跳到本行的第一个字符
^                跳到本行的第一个非空字符
$                跳到本行的最后一个字符
```

### 行内搜索

<kbd>f</kbs>会停留在第一个匹配的字母上，<kbd>t</kbd>会停留在第一个匹配的字母上

### 句子与段落导航

句子导航

```
(        跳到前一个句子
)        跳到下一个句子
```

段落导航

```
{        跳到上一个段落
}        跳到下一个段落
```

### 匹配导航

%        成对匹配

### 行号导航

```
<kbd>Ctrl</kbd><kbd>g</kbd>    查看行号
n<kbd>g</kbd>                跳到指定行
<kbd>g</kbd><kbd>g</kbd>    跳到第一行
<kbd>n%</kbd>                跳到文件的n%
```

---

### 滚动

```
Ctrl-d    向下滚动半屏
Ctrl-f    向下滚动一屏
Ctrl-u    向上滚动半屏
Ctrl-b    向上滚动一屏
```

### 跳转

```
'   跳转到标记的行
`   跳转到标记的位置(行和列)
G   跳转到行
/   向后搜索
?   向前搜索
n   重复上一次搜索，相同方向
N   重复上一次搜索，相反方向
%   查找匹配
(   跳转上一个句子
)   跳转下一个句子
{   跳转上一个段落
}   跳转下一个段落
L   跳转到当前屏幕的最后一行
M   跳转到当前屏幕的中间
H   跳转到当前屏幕的第一行
[[  跳转到上一个小节
]]  跳转到下一个小节
:s  替换
:tag  跳转到tag定义
```

### 附加操作符

```
w                移动到下一个单词开头
e                移动到下一个单词结尾
b                移动到前一个单词开头
ge                移动到前一个单词结尾
0                移动到当前行的第一个字符
^                移动到当前行的第一个非0字符
```